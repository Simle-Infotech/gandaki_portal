{"version":3,"sources":["./src/app/DemoPages/Admin/subForms/subForms.component.html","./src/app/DemoPages/Admin/subForms/subForms-routing.module.ts","./src/app/DemoPages/Admin/subForms/subForms.component.ts","./src/app/DemoPages/Admin/subForms/subForms.module.ts"],"names":[],"mappings":"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","file":"subForms-subForms-module.js","sourcesContent":["export default \"\\n<div style=\\\"margin-top: 20px;\\\">\\n  <div class=\\\"mb-3 card\\\">\\n    <div class=\\\"card-header-tab card-header\\\">\\n      <div class=\\\"card-header-title font-size-lg text-capitalize font-weight-normal\\\">\\n        <i class=\\\"header-icon lnr-charts icon-gradient bg-happy-green\\\"> </i>\\n        Forms\\n      </div>\\n      <div class=\\\"btn-actions-pane-right text-capitalize\\\">\\n        <button class=\\\"btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm\\\" (click)=\\\"addNewRow()\\\" >Add new row</button>\\n        <button class=\\\"btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm\\\" (click)=\\\"onBtStopEditing()\\\">Save data</button>\\n      </div>\\n    </div>\\n    <div class=\\\"no-gutters row\\\">\\n      <div class=\\\"col-sm-12 col-md-12\\\">\\n        <ag-grid-angular\\n          #agGrid\\n          id=\\\"SubFormGrid\\\"\\n          style=\\\"width: auto; height: 600px;\\\"\\n          class=\\\"ag-theme-alpine\\\"\\n          [rowData]=\\\"rowData\\\"\\n          [autoGroupColumnDef]=\\\"autoGroupColumnDef\\\"\\n          [columnDefs]=\\\"colData\\\"\\n          [defaultColDef]=\\\"defaultColDef\\\"\\n          [animateRows]=\\\"true\\\"\\n          [sideBar]=\\\"sideBar\\\"\\n          [statusBar]=\\\"statusBar\\\"\\n          [enableRangeSelection]=\\\"true\\\"\\n          (cellClicked)=\\\"onCellClicked($event)\\\"\\n          (cellEditingStopped)=\\\"onCellEditingStopped($event)\\\"\\n          (rowEditingStopped)=\\\"onRowEditingStopped($event)\\\"\\n          (gridReady)=\\\"onGridReady($event)\\\"\\n          [enterMovesDown]=\\\"true\\\"\\n          [enterMovesDownAfterEdit]=\\\"true\\\"\\n          [editType]=\\\"editType\\\"\\n          [enableCharts]=\\\"true\\\"\\n        >\\n        </ag-grid-angular>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {SubFormsComponent} from \"./subForms.component\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubFormsComponent,\n    data: {\n      title: 'Sub Forms'\n    }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SubFormsRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {FormBuilder} from \"@angular/forms\";\nimport {FormService} from \"../../../services/form.service\";\nimport {FormResponse, ListResponse, SingleObjectResponse} from \"../../../models/user\";\n\n@Component({\n  selector: 'app-admin-sub-forms',\n  templateUrl: './subForms.component.html',\n  styles: []\n})\nexport class SubFormsComponent implements OnInit {\n  id;\n  private gridApi;\n  private gridColumnApi;\n  defaultColDef;\n  sideBar;\n  statusBar;\n\n  ColumnAddForm;\n  loading = false;\n  submitted = false;\n  returnUrl: string;\n  error = '';\n  columnDefs = [];\n  colData = [];\n\n  rowDefs;\n  rowData = [];\n  fields = [];\n\n  title = 'app';\n  autoGroupColumnDef;\n  editType;\n  private editingRowIndex;\n  updatedData;\n  parentObject;\n  subFormObjects;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    private formService: FormService,\n    private router: Router\n  ) {\n    this.autoGroupColumnDef = { minWidth: 200 };\n    this.defaultColDef = {\n      enableRowGroup: true,\n      enablePivot: true,\n      enableValue: true,\n      sortable: true,\n      resizable: true,\n      filter: true,\n    };\n    this.sideBar = {\n      toolPanels: [\n        'filters',\n        {\n          id: 'columns',\n          labelDefault: 'Columns',\n          labelKey: 'columns',\n          iconKey: 'columns',\n          toolPanel: 'agColumnsToolPanel',\n          toolPanelParams: { suppressSyncLayoutWithGrid: true },\n        },\n      ],\n    };\n    this.statusBar = {\n      statusPanels: [\n        {\n          statusPanel: 'agTotalRowCountComponent',\n          align: 'left',\n          key: 'totalRowComponent',\n        },\n        {\n          statusPanel: 'agFilteredRowCountComponent',\n          align: 'left',\n        },\n        {\n          statusPanel: 'agSelectedRowCountComponent',\n          align: 'center',\n        },\n        {\n          statusPanel: 'agAggregationComponent',\n          align: 'right',\n        },\n      ],\n    };\n\n    this.ColumnAddForm = this.formBuilder.group({\n      newcolumn: ''\n    });\n    this.editType = 'fullRow';\n  }\n\n  ngOnInit(): void {\n    this.activatedRoute.params.subscribe(paramsId => {\n      this.id = paramsId.id;\n    });\n  }\n\n  renderTable(isOnInit) {\n    this.formService.getFormDetails(this.id).subscribe((response: SingleObjectResponse) => {\n      console.log(response);\n      this.fields = response.fields;\n      this.rowDefs = response.data;\n      if (isOnInit == true) {\n        this.columnDefs = response.columns;\n        console.log(this.columnDefs);\n        this.columnDefs.forEach(value => {\n          if (value === 'sub_forms') {\n            this.colData.push(\n              {headerName: value, field: value}\n            )\n          } else {\n            this.colData.push(\n              {headerName: value, field: value, sortable: true, filter: true, editable: true}\n            )\n          }\n        });\n\n        this.colData.push(\n          {headerName: 'tables', field: 'tables'}\n        );\n      }\n      this.rowData = [];\n      this.gridApi.setRowData(this.rowData);\n\n      this.parentObject = this.rowDefs;\n      this.subFormObjects = this.parentObject.sub_forms;\n      this.subFormObjects.forEach(value => {\n        this.rowData.push(\n          value\n        )\n      });\n      this.gridApi.setColumnDefs(this.colData);\n      this.gridApi.setRowData(this.rowData);\n    })\n  }\n\n  addNewRow() {\n    this.rowData.push({});\n    this.gridApi.setRowData(this.rowData);\n  }\n\n  onGridReady(params) {\n    this.gridApi = params.api;\n    this.gridColumnApi = params.columnApi;\n    this.renderTable(true);\n    this.gridApi.setColumnDefs(this.colData);\n  }\n\n  onBtStopEditing() {\n    this.gridApi.stopEditing();\n  }\n\n  onCellClicked($event) {\n    // check whether the current row is already opened in edit or not\n    if (this.editingRowIndex != $event.rowIndex) {\n      // console.log($event);\n      $event.api.startEditingCell({\n        rowIndex: $event.rowIndex,\n        colKey: $event.column.colId\n      });\n      this.editingRowIndex = $event.rowIndex;\n    }\n  }\n\n  onCellEditingStopped($event) {\n    const editedRowIndex = $event.rowIndex;\n    this.updatedData = $event.data;\n  }\n\n  onRowEditingStopped($event) {\n    const currentData = {\n      'data': $event.data\n    };\n\n    this.formService.saveFormValues(currentData).subscribe((response: FormResponse) => {\n      this.parentObject.sub_forms.push(response.data.id);\n      const FinalData = {\n        'data': this.parentObject\n      }\n\n      console.log(FinalData);\n\n      this.formService.saveFormValues(FinalData).subscribe(finalResponse => {\n        this.renderTable(false);\n      });\n    })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AngularFontAwesomeModule } from 'angular-font-awesome';\nimport { ChartsModule } from 'ng2-charts';\nimport { NgApexchartsModule } from 'ng-apexcharts';\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\nimport { PERFECT_SCROLLBAR_CONFIG } from 'ngx-perfect-scrollbar';\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\nimport { PageTitleModule } from '../../../Layout/Components/page-title/page-title.module';\nimport {AgGridModule} from \"ag-grid-angular\";\nimport 'ag-grid-enterprise';\nimport {SubFormsComponent} from \"./subForms.component\";\nimport {SubFormsRoutingModule} from \"./subForms-routing.module\";\n\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: PerfectScrollbarConfigInterface = {\n  suppressScrollX: true\n};\n\n@NgModule({\n  imports: [\n    CommonModule, AngularFontAwesomeModule, ChartsModule, PerfectScrollbarModule,\n    SubFormsRoutingModule, PageTitleModule, NgApexchartsModule,AgGridModule.withComponents([])\n  ],\n  declarations: [SubFormsComponent],\n  providers: [\n    {\n      provide:\n        PERFECT_SCROLLBAR_CONFIG,\n      // DROPZONE_CONFIG,\n      useValue:\n        DEFAULT_PERFECT_SCROLLBAR_CONFIG,\n      // DEFAULT_DROPZONE_CONFIG,\n    }\n  ],\n\n})\nexport class SubFormsModule { }\n"],"sourceRoot":"webpack:///"}