(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{JbRS:function(l,e,t){"use strict";t.r(e);var n=t("CcnG"),o=(t("WZ4y"),{suppressScrollX:!0}),i=function(){return function(){}}(),a=t("pMnS"),u=t("lQre"),r=t("86hh"),d=t("md+p"),s=function(){function l(l,e,t,n){this.activatedRoute=l,this.formBuilder=e,this.formService=t,this.router=n,this.loading=!1,this.submitted=!1,this.error="",this.columnDefs=[],this.colData=[],this.rowData=[],this.fields=[],this.title="app",this.autoGroupColumnDef={minWidth:200},this.defaultColDef={enableRowGroup:!0,enablePivot:!0,enableValue:!0,sortable:!0,resizable:!0,filter:!0},this.sideBar={toolPanels:["filters",{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}}]},this.statusBar={statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left",key:"totalRowComponent"},{statusPanel:"agFilteredRowCountComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent",align:"center"},{statusPanel:"agAggregationComponent",align:"right"}]},this.ColumnAddForm=this.formBuilder.group({newcolumn:""}),this.editType="fullRow"}return l.prototype.ngOnInit=function(){var l=this;this.activatedRoute.params.subscribe((function(e){l.id=e.id}))},l.prototype.renderTable=function(l){var e=this;this.formService.getTableGroupValues().subscribe((function(t){e.columnDefs=t.columns,1==l&&(e.columnDefs.forEach((function(l){"belongs_to"!=l&&e.colData.push({headerName:l,field:l,sortable:!0,filter:!0,editable:!0})})),e.colData.push({headerName:"Actions",field:"id",cellRenderer:function(l){return'<a href="/#/admin/tables/details/'+l.value+'" class="btn btn-sm">Details</a>'}}))})),this.formService.getFormDetails(this.id).subscribe((function(l){e.rowDefs=l.data,e.rowData=[],e.gridApi.setRowData(e.rowData),e.parentObject=e.rowDefs,e.tables=e.parentObject.tables,e.tables.forEach((function(l){e.rowData.push(l)})),e.gridApi.setColumnDefs(e.colData),e.gridApi.setRowData(e.rowData)}))},l.prototype.addNewRow=function(){this.rowData.push({}),this.gridApi.setRowData(this.rowData)},l.prototype.onGridReady=function(l){this.gridApi=l.api,this.gridColumnApi=l.columnApi,this.renderTable(!0),this.gridApi.setColumnDefs(this.colData)},l.prototype.onBtStopEditing=function(){this.gridApi.stopEditing()},l.prototype.onCellClicked=function(l){this.editingRowIndex!=l.rowIndex&&(l.api.startEditingCell({rowIndex:l.rowIndex,colKey:l.column.colId}),this.editingRowIndex=l.rowIndex)},l.prototype.onCellEditingStopped=function(l){this.updatedData=l.data},l.prototype.onRowEditingStopped=function(l){var e=this,t={data:l.data};t.data.belongs_to=this.id,this.formService.saveTableValues(t).subscribe((function(l){e.renderTable(!1)}))},l}(),c=t("ZYCi"),p=t("gIcY"),f=n["ɵcrt"]({encapsulation:2,styles:[],data:{}});function h(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,17,"div",[["style","margin-top: 20px;"]],null,null,null,null,null)),(l()(),n["ɵeld"](1,0,null,null,16,"div",[["class","mb-3 card"]],null,null,null,null,null)),(l()(),n["ɵeld"](2,0,null,null,8,"div",[["class","card-header-tab card-header"]],null,null,null,null,null)),(l()(),n["ɵeld"](3,0,null,null,2,"div",[["class","card-header-title font-size-lg text-capitalize font-weight-normal"]],null,null,null,null,null)),(l()(),n["ɵeld"](4,0,null,null,0,"i",[["class","header-icon lnr-charts icon-gradient bg-happy-green"]],null,null,null,null,null)),(l()(),n["ɵted"](-1,null,[" Forms "])),(l()(),n["ɵeld"](6,0,null,null,4,"div",[["class","btn-actions-pane-right text-capitalize"]],null,null,null,null,null)),(l()(),n["ɵeld"](7,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.addNewRow()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Add new row"])),(l()(),n["ɵeld"](9,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onBtStopEditing()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Save data"])),(l()(),n["ɵeld"](11,0,null,null,6,"div",[["class","no-gutters row"]],null,null,null,null,null)),(l()(),n["ɵeld"](12,0,null,null,5,"div",[["class","col-sm-12 col-md-12"]],null,null,null,null,null)),(l()(),n["ɵeld"](13,16777216,null,null,4,"ag-grid-angular",[["class","ag-theme-alpine"],["id","SubFormGrid"],["style","width: 100%; height: 600px;"]],null,[[null,"cellClicked"],[null,"cellEditingStopped"],[null,"rowEditingStopped"],[null,"gridReady"]],(function(l,e,t){var n=!0,o=l.component;return"cellClicked"===e&&(n=!1!==o.onCellClicked(t)&&n),"cellEditingStopped"===e&&(n=!1!==o.onCellEditingStopped(t)&&n),"rowEditingStopped"===e&&(n=!1!==o.onRowEditingStopped(t)&&n),"gridReady"===e&&(n=!1!==o.onGridReady(t)&&n),n}),u.b,u.a)),n["ɵprd"](512,null,r.d,r.d,[n.NgZone]),n["ɵprd"](512,null,r.e,r.e,[]),n["ɵdid"](16,4898816,[["agGrid",4]],1,r.a,[n.ElementRef,n.ViewContainerRef,r.d,r.e,n.ComponentFactoryResolver],{rowData:[0,"rowData"],columnDefs:[1,"columnDefs"],autoGroupColumnDef:[2,"autoGroupColumnDef"],defaultColDef:[3,"defaultColDef"],statusBar:[4,"statusBar"],sideBar:[5,"sideBar"],editType:[6,"editType"],enableRangeSelection:[7,"enableRangeSelection"],animateRows:[8,"animateRows"],enterMovesDownAfterEdit:[9,"enterMovesDownAfterEdit"],enterMovesDown:[10,"enterMovesDown"],enableCharts:[11,"enableCharts"]},{cellClicked:"cellClicked",gridReady:"gridReady",rowEditingStopped:"rowEditingStopped",cellEditingStopped:"cellEditingStopped"}),n["ɵqud"](603979776,1,{columns:1})],(function(l,e){var t=e.component;l(e,16,1,[t.rowData,t.colData,t.autoGroupColumnDef,t.defaultColDef,t.statusBar,t.sideBar,t.editType,!0,!0,!0,!0,!0])}),null)}function m(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,1,"app-admin-tables",[],null,null,null,h,f)),n["ɵdid"](1,114688,null,0,s,[c.a,p.FormBuilder,d.a,c.o],null,null)],(function(l,e){l(e,1,0)}),null)}var g=n["ɵccf"]("app-admin-tables",s,m,{},{},[]),w=t("FQVY"),b=function(){function l(l,e,t,n,o){this.activatedRoute=l,this.formBuilder=e,this.formService=t,this.router=n,this.generalService=o,this.loading=!1,this.submitted=!1,this.error="",this.columnDefs=[],this.colData=[],this.rowData=[],this.fields=[],this.title="app",this.autoGroupColumnDef={minWidth:200},this.defaultColDef={enableRowGroup:!0,enablePivot:!0,enableValue:!0,sortable:!0,resizable:!0,filter:!0},this.sideBar={toolPanels:["filters",{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}}]},this.statusBar={statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left",key:"totalRowComponent"},{statusPanel:"agFilteredRowCountComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent",align:"center"},{statusPanel:"agAggregationComponent",align:"right"}]},this.ColumnAddForm=this.formBuilder.group({newcolumn:""}),this.editType="fullRow"}return l.prototype.ngOnInit=function(){var l=this;this.activatedRoute.params.subscribe((function(e){l.id=e.id})),this.generalService.getTableDetails(this.id).subscribe((function(e){l.pageTitle=e.data.nepali_name,console.log(l.pageTitle)})),this.renderTable(!0)},l.prototype.renderTable=function(l){var e=this;this.formService.getQuestionColumns(this.id).subscribe((function(t){console.log(t),e.fields=t.fields,e.rowDefs=t.data,console.log(t),1==l&&(e.columnDefs=t.columns,e.columnDefs.forEach((function(l){"table"!=l&&e.colData.push({headerName:l,field:l,sortable:!0,filter:!0,editable:!0})}))),e.rowData=[],e.gridApi.setRowData(e.rowData),e.rowDefs.forEach((function(l){e.rowData.push(l)})),e.gridApi.setColumnDefs(e.colData),e.gridApi.setRowData(e.rowData)}))},l.prototype.addNewRow=function(){this.rowData.push({}),this.gridApi.setRowData(this.rowData)},l.prototype.onGridReady=function(l){this.gridApi=l.api,this.gridColumnApi=l.columnApi,this.gridApi.setColumnDefs(this.colData)},l.prototype.onBtStopEditing=function(){this.gridApi.stopEditing()},l.prototype.onCellClicked=function(l){this.editingRowIndex!=l.rowIndex&&(l.api.startEditingCell({rowIndex:l.rowIndex,colKey:l.column.colId}),this.editingRowIndex=l.rowIndex)},l.prototype.onCellEditingStopped=function(l){this.updatedData=l.data},l.prototype.onRowEditingStopped=function(l){var e=this,t={data:l.data};t.data.table=this.id,this.formService.saveQuestionColumns(t).subscribe((function(l){e.renderTable(!1)}))},l}(),C=n["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function v(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,17,"div",[["class","card main-card mb-3"]],null,null,null,null,null)),(l()(),n["ɵeld"](1,0,null,null,6,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),n["ɵted"](2,null,[" "," "])),(l()(),n["ɵeld"](3,0,null,null,4,"div",[["class","btn-actions-pane-right text-capitalize"]],null,null,null,null,null)),(l()(),n["ɵeld"](4,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.addNewRow()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Add new row"])),(l()(),n["ɵeld"](6,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onBtStopEditing()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Save data"])),(l()(),n["ɵeld"](8,0,null,null,9,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),n["ɵeld"](9,0,null,null,8,"div",[["style","margin-top: 20px;"]],null,null,null,null,null)),(l()(),n["ɵeld"](10,0,null,null,7,"div",[["class","mb-3 card"]],null,null,null,null,null)),(l()(),n["ɵeld"](11,0,null,null,6,"div",[["class","no-gutters row"]],null,null,null,null,null)),(l()(),n["ɵeld"](12,0,null,null,5,"div",[["class","col-sm-12 col-md-12"]],null,null,null,null,null)),(l()(),n["ɵeld"](13,16777216,null,null,4,"ag-grid-angular",[["class","ag-theme-alpine"],["id","tableDesignerGrid"],["style","width: auto; height: 600px;"]],null,[[null,"cellClicked"],[null,"cellEditingStopped"],[null,"rowEditingStopped"],[null,"gridReady"]],(function(l,e,t){var n=!0,o=l.component;return"cellClicked"===e&&(n=!1!==o.onCellClicked(t)&&n),"cellEditingStopped"===e&&(n=!1!==o.onCellEditingStopped(t)&&n),"rowEditingStopped"===e&&(n=!1!==o.onRowEditingStopped(t)&&n),"gridReady"===e&&(n=!1!==o.onGridReady(t)&&n),n}),u.b,u.a)),n["ɵprd"](512,null,r.d,r.d,[n.NgZone]),n["ɵprd"](512,null,r.e,r.e,[]),n["ɵdid"](16,4898816,[["agGrid",4]],1,r.a,[n.ElementRef,n.ViewContainerRef,r.d,r.e,n.ComponentFactoryResolver],{rowData:[0,"rowData"],columnDefs:[1,"columnDefs"],autoGroupColumnDef:[2,"autoGroupColumnDef"],defaultColDef:[3,"defaultColDef"],statusBar:[4,"statusBar"],sideBar:[5,"sideBar"],editType:[6,"editType"],enableRangeSelection:[7,"enableRangeSelection"],animateRows:[8,"animateRows"],enterMovesDownAfterEdit:[9,"enterMovesDownAfterEdit"],enterMovesDown:[10,"enterMovesDown"],enableCharts:[11,"enableCharts"]},{cellClicked:"cellClicked",gridReady:"gridReady",rowEditingStopped:"rowEditingStopped",cellEditingStopped:"cellEditingStopped"}),n["ɵqud"](603979776,1,{columns:1})],(function(l,e){var t=e.component;l(e,16,1,[t.rowData,t.colData,t.autoGroupColumnDef,t.defaultColDef,t.statusBar,t.sideBar,t.editType,!0,!0,!0,!0,!0])}),(function(l,e){l(e,2,0,e.component.pageTitle)}))}function D(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,1,"app-table-designer",[],null,null,null,v,C)),n["ɵdid"](1,114688,null,0,b,[c.a,p.FormBuilder,d.a,c.o,w.a],null,null)],(function(l,e){l(e,1,0)}),null)}var E=n["ɵccf"]("app-table-designer",b,D,{},{},[]),y=(t("2hxB"),function(){function l(l,e,t,n,o){this.activatedRoute=l,this.formBuilder=e,this.formService=t,this.router=n,this.generalService=o,this.loading=!1,this.submitted=!1,this.error="",this.columnDefs=[],this.colData=[],this.rowData=[],this.fields=[],this.title="app",this.buttonText="Save Data",this.autoGroupColumnDef={minWidth:200},this.defaultColDef={enableRowGroup:!0,enablePivot:!0,enableValue:!0,sortable:!0,resizable:!0,filter:!0},this.sideBar={toolPanels:["filters",{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}}]},this.statusBar={statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left",key:"totalRowComponent"},{statusPanel:"agFilteredRowCountComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent",align:"center"},{statusPanel:"agAggregationComponent",align:"right"}]},this.ColumnAddForm=this.formBuilder.group({newcolumn:""}),this.editType="fullRow",this.colIds=[],this.indexIds=[],this.rowClassRules={"sick-days-warning":function(l){return l.node.rowIndex%2==0}}}return l.prototype.ngOnInit=function(){var l=this;this.activatedRoute.params.subscribe((function(e){l.id=e.id,l.gridId="#agGridTable"+l.id,l.generalService.getTableDetails(l.id).subscribe((function(e){l.pageTitle=e.data.nepali_name})),l.renderTable(!0)}))},l.prototype.renderTable=function(l){var e=this;this.formService.getDataHeaders(this.id).subscribe((function(t){e.row_headers=t.rows_headers,e.col_headers=t.col_headers,e.index_cols=t.index_cols,e.empty_table=t.empty_table,e.rowData=[],e.gridApi.setRowData([]),1==l&&(e.colData=[],e.gridApi.setColumnDefs(e.colData),e.colData.push({headerName:"_id",value:"_id",hide:!0,suppressToolPanel:!0,field:"_id"}),e.colIds.push("_id"),e.colData.push({headerName:"",field:"group",pinned:"left",cellStyle:{color:"white","background-color":"#1c77b9"}}),e.colIds.push("group"),e.colData.push({headerName:e.row_headers.title,field:"row",pinned:"left",cellStyle:{color:"white","background-color":"#1c77b9"}}),e.colIds.push(e.row_headers.title),e.indexIds.push("row"),e.index_cols.forEach((function(l){if(l.options.length>0){var t=[];l.options.forEach((function(l){t.push(l.nepali_name)})),e.colData.push({headerName:l.title,field:l.col_id,sortable:!0,filter:!0,cellEditor:"agSelectCellEditor",cellEditorParams:{values:t},type:"Select",options:l.options})}else e.colData.push({headerName:l.title,field:l.col_id,sortable:!0,filter:!0});e.colIds.push(l.col_id),e.indexIds.push(l.col_id)})),e.col_headers.forEach((function(l){e.modifyColumnHeaders(l),e.colData.push(l)})),e.gridApi.setColumnDefs(e.colData),e.gridApi.setHeaderHeight(50)),e.empty_table.forEach((function(l){var t={},n="",o="";e.row_headers.indicators.forEach((function(e){e.id==l.row&&(n=e.title,o=e.group[0])})),t.group=o,t.row=n;var i=[];i.push("group"),i.push("row");var a=Object.keys(l);a.forEach((function(n){if("row"!=n&&"group"!=n){var o="";e.index_cols.forEach((function(e){e.col_id==n&&e.options.forEach((function(e){e.id==l[n]&&(o=e.nepali_name,i.push(n))}))})),t[n]=o}})),a.forEach((function(e){var n=!1;i.forEach((function(l){l!=e||(n=!0)})),1!=n&&(t[e]=l[e])})),console.log(t),e.rowData.push(t)})),e.formService.getData(e.id).subscribe((function(l){e.apiData=l.data,e.rowData.forEach((function(l){var t="";e.row_headers.indicators.forEach((function(e){e.title==l.row&&(t=e.id)})),l.row=t;var n=[];n.push("row"),Object.keys(l).forEach((function(t){if("row"!=t){var o="";e.index_cols.forEach((function(e){e.col_id==t&&e.options.forEach((function(e){e.nepali_name==l[t]&&(o=e.id,n.push(t))}))})),l[t]=o}})),e.apiData.forEach((function(t){var n=!0;if(e.indexIds.forEach((function(e){0!=n&&(n=l[e]==t[e])})),1==n){var o=Object.keys(t);console.log(o),console.log(e.indexIds),o.forEach((function(n){var o=!1;e.indexIds.forEach((function(l){l!=n||(o=!0)})),1!=o&&(l[n]=t[n])}))}})),t="";var o="";e.row_headers.indicators.forEach((function(e){e.id==l.row&&(t=e.title,o=e.group[0])})),l.group=o,l.row=t,(n=[]).push("_id"),n.push("group"),n.push("row"),e.indexIds.forEach((function(t){if("row"!=t&&"group"!=t){var o="";e.index_cols.forEach((function(e){e.col_id==t&&e.options.forEach((function(e){e.id==l[t]&&(o=e.nepali_name,n.push(t))}))})),l[t]=o}})),e.gridColumnApi.getAllColumns().forEach((function(t){var n=t.getUserProvidedColDef();if(console.log("Index ids"),-1!==e.indexIds.indexOf(n.field));else{if("_id"==n.field||"group"==n.field)return;"Select"==n.type&&n.options.forEach((function(e){e.id==l[n.field]&&(l[n.field]=e.nepali_name)}))}}))})),console.log("Index ids"),console.log(e.indexIds),e.gridApi.setRowData([]),e.gridApi.setRowData(e.rowData);var t=[];e.gridColumnApi.getAllColumns().forEach((function(l){t.push(l.colId)})),e.gridColumnApi.autoSizeColumns(t,!1)}))}))},l.prototype.addNewRow=function(){this.rowData.push({}),this.gridApi.setRowData(this.rowData)},l.prototype.onGridReady=function(l){this.gridApi=l.api,this.gridColumnApi=l.columnApi,this.gridApi.setColumnDefs([]),this.renderTable(!1)},l.prototype.onBtStopEditing=function(){this.gridApi.stopEditing()},l.prototype.navigateToDesignTables=function(){this.router.navigate(["admin/tables/design/"+this.id])},l.prototype.onCellClicked=function(l){this.editingRowIndex!=l.rowIndex&&(l.api.startEditingCell({rowIndex:l.rowIndex,colKey:l.column.colId}),this.editingRowIndex=l.rowIndex),this.buttonText="Save Data",this.btnClass=""},l.prototype.onCellEditingStopped=function(l){this.updatedData=l.data},l.prototype.onRowEditingStopped=function(l){l.data._id=this.saveRowData(l.data)},l.prototype.onPasteEnd=function(l){var e=this;this.gridApi.forEachNode((function(l){l.data._id=e.saveRowData(l.data)}))},l.prototype.onColumnResized=function(l){},l.prototype.modifyColumnHeaders=function(l){var e=this;return l.hasOwnProperty("children")&&l.children.forEach((function(l){if("Select"==l.type){var t=[];l.options.forEach((function(l){t.push(l.nepali_name)})),l.cellEditor="agSelectCellEditor",l.cellEditorParams={values:t}}else"Number"==l.type&&(l.cellStyle={"text-align":"right","font-family":"PCS Nepali"});e.modifyColumnHeaders(l)})),null},l.prototype.curencyNepaliRupeesFormtter=function(l){return"रू"+this.formatNumber(l.value)},l.prototype.currencyDollarFormatter=function(l){console.log(l)},l.prototype.formatNumber=function(l){return Math.floor(l).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},l.prototype.saveRowData=function(l){var e=this,t={};this.gridColumnApi.getAllColumns().forEach((function(e){var n=e.getUserProvidedColDef();"Select"==n.type?n.options.forEach((function(e){e.nepali_name==l[n.field]&&(t[n.field]=e.id)})):l[n.field]?t[n.field]=l[n.field]:"_id"!=n.field&&(t[n.field]="")})),this.row_headers.indicators.forEach((function(l){l.title==t.row&&(t.row=l.id)}));var n="";this.formService.saveData(this.id,{data:t}).subscribe((function(l){return n=l.data[0]._id,e.buttonText="Saved",e.btnClass="btn-success",n}))},l.prototype.saveTableConfiguration=function(){var l={};l.tableId=this.id,l.colState=this.gridColumnApi.getColumnState(),l.groupState=this.gridColumnApi.getColumnGroupState(),l.sortState=this.gridColumnApi.getSortModel,l.filterState=this.gridColumnApi.getFilterModel,console.log(l)},l.prototype.restoreState=function(l){this.gridColumnApi.setColumnState(l.colState),this.gridColumnApi.setColumnGroupState(l.groupState),this.gridColumnApi.setSortModel(l.sortState),this.gridColumnApi.setFilterModel(l.filterState),console.log("column state restored")},l}()),R=n["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function S(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,19,"div",[["class","card main-card mb-3"]],null,null,null,null,null)),(l()(),n["ɵeld"](1,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),n["ɵted"](2,null,[" "," "])),(l()(),n["ɵeld"](3,0,null,null,6,"div",[["class","btn-actions-pane-right text-capitalize"]],null,null,null,null,null)),(l()(),n["ɵeld"](4,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.navigateToDesignTables()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Design Tables"])),(l()(),n["ɵeld"](6,0,null,null,1,"button",[],[[8,"className",0]],[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onBtStopEditing()&&n),n}),null,null)),(l()(),n["ɵted"](7,null,["",""])),(l()(),n["ɵeld"](8,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.saveTableConfiguration()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Save Table Configuration"])),(l()(),n["ɵeld"](10,0,null,null,9,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),n["ɵeld"](11,0,null,null,8,"div",[["style","margin-top: 20px;"]],null,null,null,null,null)),(l()(),n["ɵeld"](12,0,null,null,7,"div",[["class","mb-3 card"]],null,null,null,null,null)),(l()(),n["ɵeld"](13,0,null,null,6,"div",[["class","no-gutters row"]],null,null,null,null,null)),(l()(),n["ɵeld"](14,0,null,null,5,"div",[["class","col-sm-12 col-md-12"]],null,null,null,null,null)),(l()(),n["ɵeld"](15,16777216,null,null,4,"ag-grid-angular",[["class","ag-theme-alpine"],["style","width: auto; height: 600px;"]],[[8,"id",0]],[[null,"cellClicked"],[null,"cellEditingStopped"],[null,"rowEditingStopped"],[null,"gridReady"],[null,"columnResized"],[null,"pasteEnd"]],(function(l,e,t){var n=!0,o=l.component;return"cellClicked"===e&&(n=!1!==o.onCellClicked(t)&&n),"cellEditingStopped"===e&&(n=!1!==o.onCellEditingStopped(t)&&n),"rowEditingStopped"===e&&(n=!1!==o.onRowEditingStopped(t)&&n),"gridReady"===e&&(n=!1!==o.onGridReady(t)&&n),"columnResized"===e&&(n=!1!==o.onColumnResized(t)&&n),"pasteEnd"===e&&(n=!1!==o.onPasteEnd(t)&&n),n}),u.b,u.a)),n["ɵprd"](512,null,r.d,r.d,[n.NgZone]),n["ɵprd"](512,null,r.e,r.e,[]),n["ɵdid"](18,4898816,[["agGrid",4]],1,r.a,[n.ElementRef,n.ViewContainerRef,r.d,r.e,n.ComponentFactoryResolver],{rowData:[0,"rowData"],columnDefs:[1,"columnDefs"],autoGroupColumnDef:[2,"autoGroupColumnDef"],defaultColDef:[3,"defaultColDef"],rowClassRules:[4,"rowClassRules"],statusBar:[5,"statusBar"],sideBar:[6,"sideBar"],editType:[7,"editType"],enableRangeSelection:[8,"enableRangeSelection"],animateRows:[9,"animateRows"],enterMovesDownAfterEdit:[10,"enterMovesDownAfterEdit"],enterMovesDown:[11,"enterMovesDown"],enableCharts:[12,"enableCharts"]},{columnResized:"columnResized",pasteEnd:"pasteEnd",cellClicked:"cellClicked",gridReady:"gridReady",rowEditingStopped:"rowEditingStopped",cellEditingStopped:"cellEditingStopped"}),n["ɵqud"](603979776,1,{columns:1})],(function(l,e){var t=e.component;l(e,18,1,[t.rowData,t.colData,t.autoGroupColumnDef,t.defaultColDef,t.rowClassRules,t.statusBar,t.sideBar,t.editType,!0,!0,!0,!0,!0])}),(function(l,e){var t=e.component;l(e,2,0,t.pageTitle),l(e,6,0,n["ɵinlineInterpolate"](1,"btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm ",t.btnClass,"")),l(e,7,0,t.buttonText),l(e,15,0,n["ɵinlineInterpolate"](1,"",t.gridId,""))}))}function _(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,1,"app-table-details",[],null,null,null,S,R)),n["ɵdid"](1,114688,null,0,y,[c.a,p.FormBuilder,d.a,c.o,w.a],null,null)],(function(l,e){l(e,1,0)}),null)}var x=n["ɵccf"]("app-table-details",y,_,{},{},[]),A=function(){function l(l,e,t,n){this.activatedRoute=l,this.formBuilder=e,this.formService=t,this.router=n,this.loading=!1,this.submitted=!1,this.error="",this.columnDefs=[],this.colData=[],this.rowData=[],this.fields=[],this.title="app",this.autoGroupColumnDef={minWidth:200},this.defaultColDef={enableRowGroup:!0,enablePivot:!0,enableValue:!0,sortable:!0,resizable:!0,filter:!0},this.sideBar={toolPanels:["filters",{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}}]},this.statusBar={statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left",key:"totalRowComponent"},{statusPanel:"agFilteredRowCountComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent",align:"center"},{statusPanel:"agAggregationComponent",align:"right"}]},this.ColumnAddForm=this.formBuilder.group({newcolumn:""}),this.editType="fullRow",this.colIds=[],this.indexIds=[]}return l.prototype.ngOnInit=function(){var l=this;this.activatedRoute.params.subscribe((function(e){l.id=e.id}))},l.prototype.renderTable=function(l){var e=this;this.formService.getDataHeaders(this.id).subscribe((function(t){console.log(t),e.row_headers=t.rows_headers,e.col_headers=t.col_headers,e.index_cols=t.index_cols,e.empty_table=t.empty_table,e.rowData=[],e.gridApi.setRowData([]),1==l&&(e.colData.push({headerName:"_id",value:"_id",hide:!0,suppressToolPanel:!0}),e.colIds.push("_id"),e.colData.push({headerName:"group",field:"group",pinned:"left"}),e.colIds.push("group"),e.colData.push({headerName:e.row_headers.title,field:"row",pinned:"left"}),e.colIds.push(e.row_headers.title),e.indexIds.push("row"),e.index_cols.forEach((function(l){if(l.options.length>0){var t=[];l.options.forEach((function(l){t.push(l.nepali_name)})),e.colData.push({headerName:l.title,field:l.col_id,sortable:!0,filter:!0,cellEditor:"agSelectCellEditor",cellEditorParams:{values:t}})}else e.colData.push({headerName:l.title,field:l.col_id,sortable:!0,filter:!0});e.colIds.push(l.col_id),e.indexIds.push(l.col_id)})),e.col_headers.forEach((function(l){var t={headerName:"",children:[]},n={headerName:"",children:[]};console.log(l),console.log(l.group.length),l.group.reverse().forEach((function(l){""==t.headerName?t.headerName=l:""==n.headerName&&(n.headerName=l)})),n.children.push({headerName:l.title,field:l.id,sortable:!0,filter:!0,editable:!0}),t.children.push(n),e.colData.push(t),e.colIds.push(l.id)}))),e.gridApi.setColumnDefs(e.colData),e.empty_table.forEach((function(l){var t={},n="",o="";e.row_headers.indicators.forEach((function(e){e.id==l.row&&(n=e.title,o=e.group[0])})),t.group=o,t.row=n;var i=[];i.push("group"),i.push("row");var a=Object.keys(l);a.forEach((function(n){if("row"!=n&&"group"!=n){var o="";e.index_cols.forEach((function(e){e.col_id==n&&e.options.forEach((function(e){e.id==l[n]&&(o=e.nepali_name,i.push(n))}))})),t[n]=o}})),a.forEach((function(e){var n=!1;i.forEach((function(l){l!=e||(n=!0)})),1!=n&&(t[e]=l[e])})),e.rowData.push(t)})),console.log("Row data"),console.log(e.rowData),e.formService.getData(e.id).subscribe((function(l){e.apiData=l.data,e.rowData.forEach((function(l){var t="";e.row_headers.indicators.forEach((function(e){e.title==l.row&&(t=e.id)})),l.row=t;var n=[];n.push("row"),Object.keys(l).forEach((function(t){if("row"!=t){var o="";e.index_cols.forEach((function(e){e.col_id==t&&e.options.forEach((function(e){e.nepali_name==l[t]&&(o=e.id,n.push(t))}))})),l[t]=o}})),e.apiData.forEach((function(t){var n=!0;e.indexIds.forEach((function(e){0!=n&&(n=l[e]==t[e])})),1==n&&(Object.keys(t).forEach((function(n){var o=!1;e.indexIds.forEach((function(l){l!=n||(o=!0)})),1!=o&&(l[n]=t[n])})),console.log(l))})),t="";var o="";e.row_headers.indicators.forEach((function(e){e.id==l.row&&(t=e.title,o=e.group[0])})),l.group=o,l.row=t,(n=[]).push("group"),n.push("row"),e.indexIds.forEach((function(t){if("row"!=t&&"group"!=t){var o="";e.index_cols.forEach((function(e){e.col_id==t&&e.options.forEach((function(e){e.id==l[t]&&(o=e.nepali_name,n.push(t))}))})),l[t]=o}}))})),e.gridApi.setRowData([]),e.gridApi.setRowData(e.rowData)}))}))},l.prototype.addNewRow=function(){this.rowData.push({}),this.gridApi.setRowData(this.rowData)},l.prototype.onGridReady=function(l){this.gridApi=l.api,this.gridColumnApi=l.columnApi,this.renderTable(!0)},l.prototype.onBtStopEditing=function(){this.gridApi.stopEditing()},l.prototype.onCellClicked=function(l){this.editingRowIndex!=l.rowIndex&&(l.api.startEditingCell({rowIndex:l.rowIndex,colKey:l.column.colId}),this.editingRowIndex=l.rowIndex)},l.prototype.onCellEditingStopped=function(l){this.updatedData=l.data},l.prototype.onRowEditingStopped=function(l){var e=this,t=l.data;console.log("On sop"),console.log(t);var n={},o="";this.row_headers.indicators.forEach((function(l){l.title==t.row&&(o=l.id)})),n.row=o;var i=[];i.push("row");var a=Object.keys(t);a.forEach((function(l){if("row"!=l){var o="";e.index_cols.forEach((function(e){e.col_id==l&&e.options.forEach((function(e){e.nepali_name==t[l]&&(o=e.id,i.push(l))}))})),n[l]=o}})),a.forEach((function(l){var e=!1;i.forEach((function(t){t!=l||(e=!0)})),1!=e&&(n[l]=t[l])}));var u={data:n};console.log(u),this.formService.saveData(this.id,u).subscribe((function(l){e.renderTable(!1)}))},l}(),I=n["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function T(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,15,"div",[["style","margin-top: 20px;"]],null,null,null,null,null)),(l()(),n["ɵeld"](1,0,null,null,14,"div",[["class","mb-3 card"]],null,null,null,null,null)),(l()(),n["ɵeld"](2,0,null,null,6,"div",[["class","card-header-tab card-header"]],null,null,null,null,null)),(l()(),n["ɵeld"](3,0,null,null,2,"div",[["class","card-header-title font-size-lg text-capitalize font-weight-normal"]],null,null,null,null,null)),(l()(),n["ɵeld"](4,0,null,null,0,"i",[["class","header-icon lnr-charts icon-gradient bg-happy-green"]],null,null,null,null,null)),(l()(),n["ɵted"](-1,null,[" Enter data in tables from here "])),(l()(),n["ɵeld"](6,0,null,null,2,"div",[["class","btn-actions-pane-right text-capitalize"]],null,null,null,null,null)),(l()(),n["ɵeld"](7,0,null,null,1,"button",[["class","btn-wide btn-outline-2x mr-md-2 btn btn-outline-focus btn-sm"]],null,[[null,"click"]],(function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onBtStopEditing()&&n),n}),null,null)),(l()(),n["ɵted"](-1,null,["Save data"])),(l()(),n["ɵeld"](9,0,null,null,6,"div",[["class","no-gutters row"]],null,null,null,null,null)),(l()(),n["ɵeld"](10,0,null,null,5,"div",[["class","col-sm-12 col-md-12"]],null,null,null,null,null)),(l()(),n["ɵeld"](11,16777216,null,null,4,"ag-grid-angular",[["class","ag-theme-alpine"],["id","tableDataEntryGrid"],["style","width: auto; height: 600px;"]],null,[[null,"cellClicked"],[null,"cellEditingStopped"],[null,"rowEditingStopped"],[null,"gridReady"]],(function(l,e,t){var n=!0,o=l.component;return"cellClicked"===e&&(n=!1!==o.onCellClicked(t)&&n),"cellEditingStopped"===e&&(n=!1!==o.onCellEditingStopped(t)&&n),"rowEditingStopped"===e&&(n=!1!==o.onRowEditingStopped(t)&&n),"gridReady"===e&&(n=!1!==o.onGridReady(t)&&n),n}),u.b,u.a)),n["ɵprd"](512,null,r.d,r.d,[n.NgZone]),n["ɵprd"](512,null,r.e,r.e,[]),n["ɵdid"](14,4898816,[["agGrid",4]],1,r.a,[n.ElementRef,n.ViewContainerRef,r.d,r.e,n.ComponentFactoryResolver],{rowData:[0,"rowData"],columnDefs:[1,"columnDefs"],autoGroupColumnDef:[2,"autoGroupColumnDef"],defaultColDef:[3,"defaultColDef"],statusBar:[4,"statusBar"],sideBar:[5,"sideBar"],editType:[6,"editType"],enableRangeSelection:[7,"enableRangeSelection"],animateRows:[8,"animateRows"],enterMovesDownAfterEdit:[9,"enterMovesDownAfterEdit"],enterMovesDown:[10,"enterMovesDown"],enableCharts:[11,"enableCharts"]},{cellClicked:"cellClicked",gridReady:"gridReady",rowEditingStopped:"rowEditingStopped",cellEditingStopped:"cellEditingStopped"}),n["ɵqud"](603979776,1,{columns:1})],(function(l,e){var t=e.component;l(e,14,1,[t.rowData,t.colData,t.autoGroupColumnDef,t.defaultColDef,t.statusBar,t.sideBar,t.editType,!0,!0,!0,!0,!0])}),null)}function P(l){return n["ɵvid"](0,[(l()(),n["ɵeld"](0,0,null,null,1,"app-table-data-entry",[],null,null,null,T,I)),n["ɵdid"](1,114688,null,0,A,[c.a,p.FormBuilder,d.a,c.o],null,null)],(function(l,e){l(e,1,0)}),null)}var k=n["ɵccf"]("app-table-data-entry",A,P,{},{},[]),B=t("ZSaW"),G=t("Ip0R"),N=t("mEXF"),F=t("M2Lx"),M=t("Zseb"),z=t("bse0"),O={title:"Tables"},L={title:"Tables"},K={title:"Tables"},V={title:"Tables"},W=function(){return function(){}}(),j=t("6I2X"),Z=t("Pc/E"),H=t("dFiH"),X=t("Fzqc"),q=t("Wf4p"),Y=t("ZYjt"),Q=function(){return function(){}}(),J=t("4c35"),U=t("dWZg"),$=t("lLAP"),ll=t("La40");t("t/Na"),t("F/XL"),t("XlPw"),t("VNr4"),t("xMyE"),t("67Y/"),t("9Z1F"),t("2WpN"),t("S1nX"),t("t9fZ"),t("mrSG"),t("n6gG");var el=function(){return function(){}}(),tl=t("NVKa");t.d(e,"TablesModuleNgFactory",(function(){return nl}));var nl=n["ɵcmf"](i,[],(function(l){return n["ɵmod"]([n["ɵmpd"](512,n.ComponentFactoryResolver,n["ɵCodegenComponentFactoryResolver"],[[8,[a.a,g,E,x,k,B.a]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["ɵmpd"](4608,G.NgLocalization,G.NgLocaleLocalization,[n.LOCALE_ID,[2,G["ɵangular_packages_common_common_a"]]]),n["ɵmpd"](4608,N.c,N.c,[]),n["ɵmpd"](4608,F.c,F.c,[]),n["ɵmpd"](1073742336,G.CommonModule,G.CommonModule,[]),n["ɵmpd"](1073742336,N.b,N.b,[]),n["ɵmpd"](1073742336,M.b,M.b,[]),n["ɵmpd"](1073742336,z.d,z.d,[]),n["ɵmpd"](1073742336,c.s,c.s,[[2,c.x],[2,c.o]]),n["ɵmpd"](1073742336,W,W,[]),n["ɵmpd"](1073742336,j.a,j.a,[]),n["ɵmpd"](1073742336,Z.a,Z.a,[]),n["ɵmpd"](1073742336,H.b,H.b,[]),n["ɵmpd"](1073742336,r.c,r.c,[]),n["ɵmpd"](1073742336,X.a,X.a,[]),n["ɵmpd"](1073742336,q.c,q.c,[[2,q.a],[2,Y.HAMMER_LOADER]]),n["ɵmpd"](1073742336,Q,Q,[]),n["ɵmpd"](1073742336,J.c,J.c,[]),n["ɵmpd"](1073742336,U.b,U.b,[]),n["ɵmpd"](1073742336,q.e,q.e,[]),n["ɵmpd"](1073742336,F.d,F.d,[]),n["ɵmpd"](1073742336,$.a,$.a,[]),n["ɵmpd"](1073742336,ll.j,ll.j,[]),n["ɵmpd"](1073742336,el,el,[]),n["ɵmpd"](1073742336,i,i,[]),n["ɵmpd"](1024,c.m,(function(){return[[{path:":id",component:s,data:O},{path:"design/:id",component:b,data:L},{path:"details/:id",component:y,data:K},{path:"data/:id",component:A,data:V}],[{path:"",component:tl.a,data:j.b}]]}),[]),n["ɵmpd"](256,z.a,o,[])])}))}}]);